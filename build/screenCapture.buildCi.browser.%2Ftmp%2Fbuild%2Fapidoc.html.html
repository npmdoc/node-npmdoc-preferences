<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/CaffeinaLab/preferences#readme">preferences (v0.2.1)</a>
</h1>
<h4>Manage CLI application encrypted preferences.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.preferences">module preferences</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.preferences.preferences">
            function <span class="apidocSignatureSpan"></span>preferences
            <span class="apidocSignatureSpan">(id, defs, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.preferences.toString">
            function <span class="apidocSignatureSpan">preferences.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.preferences.toString">module preferences.toString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.preferences.toString.toString">
            function <span class="apidocSignatureSpan">preferences.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.preferences" id="apidoc.module.preferences">module preferences</a></h1>


    <h2>
        <a href="#apidoc.element.preferences.preferences" id="apidoc.element.preferences.preferences">
        function <span class="apidocSignatureSpan"></span>preferences
        <span class="apidocSignatureSpan">(id, defs, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Preferences(id, defs, options) {
  options = options || {
    key: null
  }
  var self = this
  var identifier = id.replace(/[\/\?&lt;&gt;\\:\*\|" :]/g, '.').replace(/\.+/g, '.')
  var path = require('path')
  var homedir = require('os-homedir')()
  var dirpath = path.join(homedir, '.config', 'preferences')
  var filepath = path.join(dirpath, identifier + '.pref')
  var fs = require('graceful-fs')
  var writeFileAtomic = require('write-file-atomic')
  var mkdirp = require('mkdirp')
  var crypto = require('crypto')
  var password = (function () {
    var key = options.key || path.join(homedir, '.ssh', 'id_rsa')
    try {
      // Use private SSH key or...
      return fs.readFileSync(key).toString('utf8')
    } catch (e) {
      // ...fallback to an id dependant password
      return 'PREFS-' + identifier
    }
  })()
  var savePristine = false
  var savedData = null

  function encode (text) {
    var cipher = crypto.createCipher('aes128', password)
    return cipher.update(new Buffer(text).toString('utf8'), 'utf8', 'hex') + cipher.final('hex')
  }

  function decode (text) {
    var decipher = crypto.createDecipher('aes128', password)
    return decipher.update(String(text), 'hex', 'utf8') + decipher.final('utf8')
  }

  function save () {
    var payload = encode(String(JSON.stringify(self) || '{}'))
    try {
      mkdirp.sync(dirpath, parseInt('0700', 8))
      writeFileAtomic.sync(filepath, payload, {
        mode: parseInt('0600', 8)
      })
    } catch (err) {}
  }

  try {
    // Try to read and decode preferences saved on disc
    savedData = JSON.parse(decode(fs.readFileSync(filepath, 'utf8')))
  } catch (err) {
    // Read error (maybe file doesn't exist) so update with defaults
    savedData = defs || {}
    savePristine = true
  }

  // Clone object
  for (var o in savedData) self[o] = savedData[o]

  // Config file was empty, save default values
  savePristine &amp;&amp; save()

  // Save all on program exit
  process.on('exit', save)

  // If supported observe object for saving on modify
  if (Object.observe) Object.observe(self, save)

  return self
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.preferences.toString" id="apidoc.element.preferences.toString">
        function <span class="apidocSignatureSpan">preferences.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var writeFileAtomic = require('write-file-atomic')
var mkdirp = require('mkdirp')
var crypto = require('crypto')
var password = (function () {
  var key = options.key || path.join(homedir, '.ssh', 'id_rsa')
  try {
    // Use private SSH key or...
    return fs.readFileSync(key).<span class="apidocCodeKeywordSpan">toString</span>('utf8')
  } catch (e) {
    // ...fallback to an id dependant password
    return 'PREFS-' + identifier
  }
})()
var savePristine = false
var savedData = null
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.preferences.toString" id="apidoc.module.preferences.toString">module preferences.toString</a></h1>


    <h2>
        <a href="#apidoc.element.preferences.toString.toString" id="apidoc.element.preferences.toString.toString">
        function <span class="apidocSignatureSpan">preferences.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var writeFileAtomic = require('write-file-atomic')
var mkdirp = require('mkdirp')
var crypto = require('crypto')
var password = (function () {
  var key = options.key || path.join(homedir, '.ssh', 'id_rsa')
  try {
    // Use private SSH key or...
    return fs.readFileSync(key).<span class="apidocCodeKeywordSpan">toString</span>('utf8')
  } catch (e) {
    // ...fallback to an id dependant password
    return 'PREFS-' + identifier
  }
})()
var savePristine = false
var savedData = null
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>